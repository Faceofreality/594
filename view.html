<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>594 ANTI EXTORT - View Media</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/view.css">
</head>
<body>
  <a href="index.html" class="back-button">‚Üê Back to Main</a>
  
  <div class="title-container">
    <h1 class="page-title">MEDIA VIEWER</h1>
  </div>
  
  <div id="media-display"></div>
  
  <script>
    // Get the media ID from the URL
    const urlParams = new URLSearchParams(window.location.search);
    const mediaId = urlParams.get('id');
    const mediaDisplay = document.getElementById('media-display');
    
    // Load and display media
    function loadMedia() {
      if (!mediaId) {
        showNotFound('No media ID provided in the URL');
        return;
      }
      
      const uploads = JSON.parse(localStorage.getItem('uploads') || '[]');
      const media = uploads.find(item => item.id === mediaId);
      
      if (!media) {
        showNotFound('Media not found. It may have been deleted or the link is invalid.');
        return;
      }
      
      // Create media container
      const mediaContainer = document.createElement('div');
      mediaContainer.className = 'media-container';
      
      // Set title
      const titleElement = document.createElement('h2');
      titleElement.className = 'media-title';
      titleElement.textContent = media.title;
      mediaContainer.appendChild(titleElement);
      
      // Set date
      const dateElement = document.createElement('div');
      dateElement.className = 'media-date';
      const date = new Date(media.timestamp).toLocaleString();
      dateElement.textContent = `Uploaded: ${date}`;
      mediaContainer.appendChild(dateElement);
      
      // Set media content
      const contentElement = document.createElement('div');
      contentElement.className = 'media-content';
      
      if (media.type.startsWith('image/')) {
        const img = document.createElement('img');
        img.src = media.data;
        img.alt = media.title;
        contentElement.appendChild(img);
      } else if (media.type.startsWith('video/')) {
        const video = document.createElement('video');
        video.controls = true;
        
        const source = document.createElement('source');
        source.src = media.data;
        source.type = media.type;
        
        video.appendChild(source);
        contentElement.appendChild(video);
      }
      
      mediaContainer.appendChild(contentElement);
      
      // Add upload button
      const uploadButton = document.createElement('a');
      uploadButton.href = 'upload.html';
      uploadButton.className = 'button';
      uploadButton.textContent = 'UPLOAD YOUR OWN';
      mediaContainer.appendChild(uploadButton);
      
      // Display the media
      mediaDisplay.appendChild(mediaContainer);
      
      // Update page title
      document.title = `${media.title} - 594 ANTI EXTORT`;
    }
    
    function showNotFound(message) {
      const notFoundContainer = document.createElement('div');
      notFoundContainer.className = 'not-found';
      
      const title = document.createElement('h2');
      title.textContent = 'Content Not Found';
      notFoundContainer.appendChild(title);
      
      const messageElement = document.createElement('p');
      messageElement.textContent = message;
      messageElement.style.margin = '20px 0';
      notFoundContainer.appendChild(messageElement);
      
      const uploadButton = document.createElement('a');
      uploadButton.href = 'upload.html';
      uploadButton.className = 'button';
      uploadButton.textContent = 'UPLOAD YOUR OWN';
      notFoundContainer.appendChild(uploadButton);
      
      mediaDisplay.appendChild(notFoundContainer);
    }
    
    // Load media when the page loads
    document.addEventListener('DOMContentLoaded', loadMedia);
  </script>
</body>
</html>
